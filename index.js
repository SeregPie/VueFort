!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue-demi")):"function"==typeof define&&define.amd?define(["exports","vue-demi"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueFort={},e.VueDemi)}(this,(function(e,t){"use strict";function n(e){return"function"==typeof e}function f(){}function r(e){return!(!e||!0!==e.$isEffect)}let i,o=new WeakMap;function c(e){return o.has(e)}function s(e){return!!(e&&e.$effectScope&&c(e.$effectScope))}function l(e){if(r(e)){let{stop:t}=e;return t()}if(c(e)){let{stop:t}=o.get(e);return t()}return function(e){return!!(e&&e.$effect&&r(e.$effect))}(e)?l(e.$effect):s(e)?l(e.$effectScope):void 0}function u(e){if(i){let{effects:t}=o.get(i);t.add(e)}else t.getCurrentInstance()&&t.onUnmounted((()=>{l(e)}))}function a(e){let t=[],n=e=>{t.push(e)},f={},r=new Set,c=e=>{if(e){let t=i;i=f;try{Object.assign(f,e(n))}finally{i=t}}return f};return o.set(f,{effects:r,extend:c,stop(){r.forEach((e=>{l(e)})),t.forEach((e=>{e()}))}}),u(f),c(e),f}function d(e,t){if(c(e)){let{extend:n}=o.get(e);return n(t)}if(s(e))return d(e.$effectScope,t)}function p(e){if(e){let t=typeof e;return"object"===t||"function"===t}return!1}function h(e,r){return function(e){let r,i;return n(e)?(r=e,i=f):({get:r,set:i}=e),t.customRef((()=>({get:r,set:i})))}({get:()=>e[r],set(t){e[r]=t}})}let y=new WeakMap;function b(e){let n={};if(p(e))if(t.isReactive(e)){let f=y.get(e);f||(f={},y.set(e,f));let r=t.toRaw(e);t.isReadonly(e)?Object.keys(e).forEach((i=>{let o=f[i];if(!o){if(t.isReactive(r))o=t.shallowReadonly(h(e,i));else{let n=r[i];o=t.isRef(n)?t.isReadonly(n)?n:t.shallowReadonly(n):t.shallowReadonly(h(e,i))}f[i]=o}n[i]=o})):Object.keys(e).forEach((i=>{let o=f[i];if(!o){if(t.isReactive(r))o=h(e,i);else{let n=r[i];o=t.isRef(n)?n:h(e,i)}f[i]=o}n[i]=o}))}else t.isReadonly(e)?(e=t.toRaw(e),Object.entries(e).forEach((([e,f])=>{n[e]=t.isRef(f)?t.isReadonly(f)?f:t.shallowReadonly(f):t.shallowReadonly(t.shallowRef(f))}))):Object.entries(e).forEach((([e,f])=>{n[e]=t.isRef(f)?f:t.shallowRef(f)}));return n}var R=Array.isArray;function g(e){return"string"==typeof e}e.createInstance=function({state:e={},getters:r={},watch:i={},methods:o={},bind:h=!0}={}){let y=!1,j=((e,t)=>{if(!0===e)return a(t);if(c(e)||s(e)){let n;return d(e,(()=>{n=a(t)})),n}})(h,(e=>{e((()=>{y=!0}))})),v={};return Object.defineProperties(v,{$effectScope:{value:j},$destroy:{value(){l(j)}},$isDestroyed:{get:()=>y}}),d(j,(()=>{p(e)&&Object.entries(b(t.reactive(e))).forEach((([e,t])=>{Object.defineProperty(v,e,{enumerable:!0,get:()=>t.value,set(e){t.value=e}})})),p(r)&&Object.entries(r).forEach((([e,r])=>{if(n(r)){let i=function(e){let r,i;n(e)?(r=e,i=f):({get:r,set:i}=e);let o,c=!0;return u({$isEffect:!0,stop(){c=!1}}),t.computed({get:()=>(c&&(o=r()),o),set:i})}(r.bind(v));Object.defineProperty(v,e,{enumerable:!0,get:()=>i.value})}})),p(o)&&Object.entries(o).forEach((([e,t])=>{n(t)&&Object.defineProperty(v,e,{enumerable:!0,value:t.bind(v)})})),p(i)&&Object.entries(i).forEach((([e,f])=>{let r=(e=>{let t=e.split(".");return 1===t.length?()=>v[e]:()=>function(e,t){return t.forEach((t=>{e=e[t]})),e}(v,t)})(e),i=e=>{let f,i;g(e)?f=v[e]:n(e)?f=e.bind(v):p(e)&&(({handler:e,...i}=e),g(e)?f=v[e]:n(e)&&(f=e.bind(v))),function(...e){let n=t.watch(...e);u({$isEffect:!0,stop:n})}(r,f,i)};R(f)?f.forEach(i):i(f)}))})),v},e.toRefs=b,Object.defineProperty(e,"__esModule",{value:!0})}));
