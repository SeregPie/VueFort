!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue-demi")):"function"==typeof define&&define.amd?define(["exports","vue-demi"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueFort={},e.VueDemi)}(this,(function(e,t){"use strict";var n=Array.isArray,f=Object.is;function i(e){return"function"==typeof e}function r(e){if(e){let t=typeof e;return"object"===t||"function"===t}return!1}function o(e){return"string"==typeof e}function l(){}function s(e){let n,f;return i(e)?(n=e,f=l):({get:n,set:f}=e),t.customRef((()=>({get:n,set:f})))}function c(e){return!(!e||!0!==e.$isEffect)}let u,a=new WeakMap;function d(e){return a.has(e)}function h(e){return!!(e&&e.$effectScope&&d(e.$effectScope))}function p(e){if(c(e)){let{stop:t}=e;return t()}if(d(e)){let{stop:t}=a.get(e);return t()}return function(e){return!!(e&&e.$effect&&c(e.$effect))}(e)?p(e.$effect):h(e)?p(e.$effectScope):void 0}function b(e){if(u){let{effects:t}=a.get(u);t.add(e)}else t.getCurrentInstance()&&t.onUnmounted((()=>{p(e)}))}function g(e){let t=[],n=e=>{t.push(e)},f={},i=new Set,r=e=>{if(e){let t=u;u=f;try{Object.assign(f,e(n))}finally{u=t}}return f};return a.set(f,{effects:i,extend:r,stop(){i.forEach((e=>{p(e)})),t.forEach((e=>{e()}))}}),b(f),r(e),f}function v(e,t){if(d(e)){let{extend:n}=a.get(e);return n(t)}if(h(e))return v(e.$effectScope,t)}function y(e,t){return s({get:()=>e[t],set(n){e[t]=n}})}let R=new WeakMap;function j(e){let n={};if(r(e))if(t.isReactive(e)){let f=R.get(e);f||(f={},R.set(e,f));let i=t.toRaw(e);t.isReadonly(e)?Object.keys(e).forEach((r=>{let o=f[r];if(!o){if(t.isReactive(i))o=t.shallowReadonly(y(e,r));else{let n=i[r];o=t.isRef(n)?t.isReadonly(n)?n:t.shallowReadonly(n):t.shallowReadonly(y(e,r))}f[r]=o}n[r]=o})):Object.keys(e).forEach((r=>{let o=f[r];if(!o){if(t.isReactive(i))o=y(e,r);else{let n=i[r];o=t.isRef(n)?n:y(e,r)}f[r]=o}n[r]=o}))}else t.isReadonly(e)?(e=t.toRaw(e),Object.entries(e).forEach((([e,f])=>{n[e]=t.isRef(f)?t.isReadonly(f)?f:t.shallowReadonly(f):t.shallowReadonly(t.shallowRef(f))}))):Object.entries(e).forEach((([e,f])=>{n[e]=t.isRef(f)?f:t.shallowRef(f)}));return n}function O(e,f,l){let s=function(e,t){let n=t.split(".");return 1===n.length?()=>e[t]:()=>function(e,t){return t.forEach((t=>{e=e[t]})),e}(e,n)}(e,l),c=n=>{let f,l;o(n)?f=e[n]:i(n)?f=n.bind(e):r(n)&&(({handler:n,...l}=n),o(n)?f=e[n]:i(n)&&(f=n.bind(e))),function(...e){let n=t.watch(...e);b({$isEffect:!0,stop:n})}(s,f,l)};n(f)?f.forEach(c):c(f)}function w(e,n,{bind:r=!0}={}){let o={},c={};Object.entries(j(n)).forEach((([e,n])=>{let{track:f,trigger:i}=function(){let e=t.shallowRef({});return{track(){e.value},trigger(){e.value={}}}}();o[e]=s({get:()=>(f(),n.value),set(e){n.value=e}}),c[e]=e=>{n!==e&&(n=e,i())}}));let u=!1,a=function(e,t){if(!0===e)return g(t);if(d(e)||h(e)){let n;return v(e,(()=>{n=g(t)})),n}}(r,(e=>{e((()=>{u=!0}))})),y={};return Object.defineProperties(y,{$model:{value:e},$effectScope:{value:a},$update:{value(e){var t;t=j(e),Object.entries(c).forEach((([e,n])=>{n(t[e])}))}},$destroy:{value(){p(a)}},$isDestroyed:{get:()=>u}}),v(a,(()=>{let n={...o},{options:{state:r,getters:c,watch:u,methods:a}={}}=e;r&&i(r)&&Object.assign(n,j(r({...o})));let d={};Object.entries(n).forEach((([e,t])=>{d[e]={get:()=>t.value,set(e){t.value=e}}})),c&&Object.entries(c).forEach((([e,n])=>{if(i(n)){let r=function(e){let n,r;i(e)?(n=e,r=l):({get:n,set:r}=e);let o,c={$isEffect:!0,stop:l};return b(c),s({get:()=>(o||(c.stop=t.watch(n,(e=>{o?f(o.value,e)||(o.value=e):o=t.shallowRef(e)}),{flush:"sync",immediate:!0})),o.value),set:r})}(n.bind(y));d[e]={get:()=>r.value}}})),a&&Object.entries(a).forEach((([e,t])=>{i(t)&&(d[e]={value:t.bind(y)})})),Object.entries(d).forEach((([e,t])=>{var n;Object.assign(t,{enumerable:(n=e,!n.startsWith("_"))})})),Object.defineProperties(y,d),u&&Object.entries(u).forEach((([e,t])=>{O(y,t,e)}))})),y}e.c=function(...e){return w(...e)},e.defineModel=function(e){e=t.shallowRef(e);let n=function(...e){return w(n,...e)};return Object.defineProperties(n,{options:{get:()=>e.value,set(t){e.value=t}},update:{value(e){Object.assign(n,{options:e})}}}),n},e.toRefs=j,Object.defineProperty(e,"__esModule",{value:!0})}));
